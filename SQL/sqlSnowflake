USE LunaParkMadhouse

CREATE TABLE STATUS(
    STATUSID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    STATUSLABEL NVARCHAR(20) NOT NULL
);


CREATE TABLE VISITOR(
    VISITORID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    VISITORNUMBER INT NOT NULL,
    YEARS INT NOT NULL,
    WEIGHT INT NOT NULL,
    HEIGHT DECIMAL(3,2) NOT NULL
);


CREATE TABLE ATTRACTION(
    ATTRACTIONID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    NAME NVARCHAR(20) NOT NULL,
    YEARSCONSTRAINT TEXT NOT NULL,
    WEIGHTCONSTRAINT TEXT NOT NULL,
    HEIGHTCONSTRAINT TEXT NOT NULL,
    DESCRIPTION TEXT NOT NULL
);


CREATE TABLE CANTEEN(
    CANTEENID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    NAME NVARCHAR(20) NOT NULL,
    DESCRIPTION TEXT NOT NULL,
    DATE DATETIME NOT NULL,
    DAYILYPROFIT DECIMAL(6,3) NOT NULL
);


CREATE TABLE POSITION(
    POSITIONID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    NAME NVARCHAR(20) NOT NULL,
    BONUSFORPOSITION DECIMAL(6,3) NOT NULL
);


CREATE TABLE WORKINGHOURS(
    WORKINGHOURSID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    HOURS INT NOT NULL,
    SALARY DECIMAL(6,3) NOT NULL
);


CREATE TABLE EVENT(
    EVENTID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    DATE DATE NOT NULL,
    STARTTIME TIME NOT NULL,
    CLOSINGTIME TIME NOT NULL,
    DESCRIPTION TEXT NOT NULL
);




CREATE TABLE TICKET(
    TICKETID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    SINGLEPRICE DECIMAL(6,3) NOT NULL,
    STATUSID INT NOT NULL,
    ATTRACTIONID INT NOT NULL,
    EVENTID INT NOT NULL,
    FOREIGN KEY (STATUSID) REFERENCES STATUS(STATUSID),
    FOREIGN KEY (ATTRACTIONID) REFERENCES ATTRACTION(ATTRACTIONID),
    FOREIGN KEY (EVENTID) REFERENCES EVENT(EVENTID)
);


CREATE TABLE DISH(
    DISHID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    NAME NVARCHAR(20) NOT NULL,
    SINGLEPRICE DECIMAL(4,2) NOT NULL,
    DESCRIPTION TEXT NOT NULL,
    CANTEENID INT NOT NULL,
    FOREIGN KEY (CANTEENID) REFERENCES CANTEEN(CANTEENID)
);


CREATE TABLE DRINK(
    DRINKID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    BRAND NVARCHAR(20) NOT NULL,
    NAME NVARCHAR(20) NOT NULL,
    SINGLEPRICE DECIMAL(4,2) NOT NULL,
    CANTEENID INT NOT NULL,
    FOREIGN KEY (CANTEENID) REFERENCES CANTEEN(CANTEENID)
);


CREATE TABLE DISH_AND_DRINK_SALES(
    SALESID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    DISHID INT NOT NULL,
    DRINKID INT NOT NULL,
    COUNT INT NOT NULL,
    FOREIGN KEY (DISHID) REFERENCES DISH(DISHID),
    FOREIGN KEY (DRINKID) REFERENCES DRINK(DRINKID)
);


CREATE TABLE TICKETSALES(
    SALESID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    TICKETID INT NOT NULL,
    COUNT INT NOT NULL,
    FOREIGN KEY (TICKETID) REFERENCES TICKET(TICKETID)
);


CREATE TABLE SERVANT(
    SERVANTID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    NAME NVARCHAR(20) NOT NULL,
    CANTEENID INT NOT NULL,
    POSITIONID INT NOT NULL,
    FOREIGN KEY (CANTEENID) REFERENCES CANTEEN(CANTEENID),
    FOREIGN KEY (POSITIONID) REFERENCES POSITION(POSITIONID)
);


CREATE TABLE SERVICE(
    SERVICEID INT IDENTITY(1,1) PRIMARY KEY NOT NULL,
    TIME_OF_VERIFICATION TIME NOT NULL,
    PROBLEM TEXT NOT NULL,
    DATE DATE NOT NULL,
    SERVICEPRICE DECIMAL(6,3) NOT NULL,
    TIME_FOR_PROBLEM INT NOT NULL,
    ATTRACTIONID INT NOT NULL,
    FOREIGN KEY (ATTRACTIONID) REFERENCES ATTRACTION(ATTRACTIONID)
)
